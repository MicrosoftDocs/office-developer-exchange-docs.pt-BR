---
title: Logs de transações e arquivos de ponto de verificação de backup e restauração no Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 80e04b9f-87c7-4acf-89b1-aa66ffaf7e53
description: Encontre informações sobre logs de transações e arquivos de ponto de verificação e como elas são usadas para fazer backup e restaurar dados do Exchange 2013.
ms.openlocfilehash: 53f128348bb2e8895bc1eefaf62402fa348c81ea
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/25/2018
ms.locfileid: "19750656"
---
# <a name="transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange"></a><span data-ttu-id="9b65c-103">Logs de transações e arquivos de ponto de verificação de backup e restauração no Exchange</span><span class="sxs-lookup"><span data-stu-id="9b65c-103">Transaction logs and checkpoint files for backup and restore in Exchange</span></span>

<span data-ttu-id="9b65c-104">Encontre informações sobre logs de transações e arquivos de ponto de verificação e como elas são usadas para fazer backup e restaurar dados do Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="9b65c-104">Find information about transaction logs and checkpoint files and how they are used to back up and restore Exchange 2013 data.</span></span>
  
<span data-ttu-id="9b65c-105">**Aplica-se a:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="9b65c-106">Este artigo descreve como o Exchange Server 2013 usa logs de transações e arquivos de ponto de verificação para ajudar a evitar perda de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-106">This article describes how Exchange Server 2013 uses transaction logs and checkpoint files to help prevent data loss.</span></span> <span data-ttu-id="9b65c-107">É importante estar ciente dessas informações quando você desenvolver o backup e restaurar aplicativos que usam o serviço de cópia de sombra de Volume (VSS) nas versões do Windows Server, começando com o Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="9b65c-107">It is important to be aware of this information when you develop backup and restore applications that use the Volume Shadow Copy Service (VSS) in versions of Windows Server starting with Windows Server 2008.</span></span>
  
## <a name="transaction-logs-in-exchange-2013"></a><span data-ttu-id="9b65c-108">Os logs de transações no Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-108">Transaction logs in Exchange 2013</span></span>

<span data-ttu-id="9b65c-109">Exchange 2013 mantém um único conjunto de arquivos de log de transações para cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-109">Exchange 2013 maintains a single set of transaction log files for each database.</span></span> <span data-ttu-id="9b65c-110">Uma transação é definida como qualquer operação que altera o estado ou conteúdo do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-110">A transaction is defined as any operation that changes the state or contents of the database.</span></span> <span data-ttu-id="9b65c-111">Os arquivos de log de transação para um registro de banco de dados individual, todas as transações realizadas no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-111">The transaction log files for an individual database record all the transactions performed on the database.</span></span> <span data-ttu-id="9b65c-112">Registros das transações serão gravados os logs de transação antes que eles sejam feitos no banco de dados em si, para garantir que todas as transações confirmadas possam ser recuperadas em caso de uma falha de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-112">Records of the transactions are written to the transaction logs before they are made in the database itself, to ensure that all committed transactions can be recovered in the event of a database failure.</span></span> <span data-ttu-id="9b65c-113">Logs de transações de banco de dados do Exchange 2013 são armazenados no disco antes que as transações sejam confirmadas no arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-113">Exchange 2013 database transaction logs are stored on disk before the transactions are committed to the database file.</span></span> 
  
<span data-ttu-id="9b65c-114">A gravação das transações antes que o banco de dados é atualizado é chamada de gravação antecipada log.</span><span class="sxs-lookup"><span data-stu-id="9b65c-114">The recording of the transactions before the database is updated is called write-ahead logging.</span></span> <span data-ttu-id="9b65c-115">Para ajudar a garantir que o banco de dados corretamente é trazido de volta para o estado apropriado, Exchange 2013 grava os dados nos arquivos do banco de dados usando os pontos de verificação e gravações baseado em página.</span><span class="sxs-lookup"><span data-stu-id="9b65c-115">To help ensure that the database is correctly brought back to the proper state, Exchange 2013 writes data into the database files by using page-based writes and checkpoints.</span></span> <span data-ttu-id="9b65c-116">Durante as operações normais, o armazenamento do Exchange primeiro registra as alterações do banco de dados nos logs de transação e, em seguida, torna essas alterações em uma cópia na memória do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-116">During regular operations, the Exchange store first records database changes in the transaction logs, and then makes those changes on an in-memory copy of the database.</span></span> <span data-ttu-id="9b65c-117">Os logs de transação registram início e no final de cada transação.</span><span class="sxs-lookup"><span data-stu-id="9b65c-117">The transaction logs record the beginning and end of each transaction.</span></span> <span data-ttu-id="9b65c-118">Isso garante que informações suficientes estão disponíveis para desfazer mais tarde ou reverter operações no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-118">This ensures that sufficient information is available to later undo or roll back operations in the database.</span></span>
  
<span data-ttu-id="9b65c-119">Ao recuperar de erros no qual o arquivo de banco de dados em disco estiver danificado, mas os logs de transação estão intactos, seu aplicativo de restauração primeiramente deve restaurar uma cópia de uma boa conhecida do arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-119">When recovering from errors in which the database file on disk is damaged, but the transaction logs are intact, your restore application must first restore a known good copy of the database file.</span></span>
  
<span data-ttu-id="9b65c-120">O armazenamento do Exchange repete as transações da transação de um backup anterior faz e depois repete todas as transações de restantes dos arquivos de log de transação no disco.</span><span class="sxs-lookup"><span data-stu-id="9b65c-120">The Exchange store replays the transactions from the previously backed up transaction logs, and then replays any remaining transactions from the on-disk transaction log files.</span></span> <span data-ttu-id="9b65c-121">Observe que em alguns casos, as transações podem ser perdidas se o sistema falhar entre quando as transações são registradas nos logs de transação e quando eles são gravados na verdade, os arquivos de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9b65c-121">Note that sometimes transactions can be lost if the system fails between when the transactions are recorded in the transaction logs, and when they are actually written to the database files.</span></span> 
  
<span data-ttu-id="9b65c-122">Periodicamente, o armazenamento do Exchange verifica a imagem do banco de dados na memória e, em seguida, determina quais páginas foram alteradas.</span><span class="sxs-lookup"><span data-stu-id="9b65c-122">Periodically, the Exchange store checks the in-memory database image, and then determines which pages have changed.</span></span> <span data-ttu-id="9b65c-123">O armazenamento do Exchange combina as alterações pendentes e depois grava essas páginas para o arquivo de banco de dados no disco.</span><span class="sxs-lookup"><span data-stu-id="9b65c-123">The Exchange store combines the pending changes, and then writes those pages to the database file on disk.</span></span>
  
## <a name="checkpoint-files-in-exchange-2013"></a><span data-ttu-id="9b65c-124">Arquivos de ponto de verificação no Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-124">Checkpoint files in Exchange 2013</span></span>

<span data-ttu-id="9b65c-125">Registros de arquivo um ponto de verificação que conectado transações tem sido escrito para os arquivos de banco de dados no disco.</span><span class="sxs-lookup"><span data-stu-id="9b65c-125">A checkpoint file records which logged transactions have been written to the on-disk database files.</span></span> <span data-ttu-id="9b65c-126">O ponto de verificação é avançado quando todas as páginas do banco de dados que foram modificadas por entradas nos logs de transação com êxito são gravadas no disco.</span><span class="sxs-lookup"><span data-stu-id="9b65c-126">The checkpoint is advanced when all the database pages that have been modified by entries in the transaction logs are successfully written to disk.</span></span> <span data-ttu-id="9b65c-127">Porque o arquivo de verificação de registros que transações já estão na imagem do banco de dados no disco, o armazenamento do Exchange só precisa transações que tenham ocorrido após o ponto de verificação de repetição.</span><span class="sxs-lookup"><span data-stu-id="9b65c-127">Because the checkpoint file records which transactions are already in the on-disk database image, the Exchange store only needs to replay transactions that occurred after the checkpoint.</span></span> <span data-ttu-id="9b65c-128">Dependendo do período de tempo entre backups, isso pode diminuir bastante o número de transações que devem ser repetidos no banco de dados se ocorrer uma falha do sistema.</span><span class="sxs-lookup"><span data-stu-id="9b65c-128">Depending on the time period between backups, this can greatly decrease the number of transactions that must be replayed into the database if a system failure occurs.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="9b65c-129">Confira também</span><span class="sxs-lookup"><span data-stu-id="9b65c-129">See also</span></span>

- [<span data-ttu-id="9b65c-130">Conceitos de backup e restauração do Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-130">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
- [<span data-ttu-id="9b65c-131">Tipos de operações de backup para o Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-131">Types of backup operations for Exchange 2013</span></span>](types-of-backup-operations-for-exchange-2013.md)
- [<span data-ttu-id="9b65c-132">Restaurando bancos de dados do Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9b65c-132">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    

