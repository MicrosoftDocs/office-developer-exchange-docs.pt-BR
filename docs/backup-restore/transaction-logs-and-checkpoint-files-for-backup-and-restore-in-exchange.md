---
title: Logs de transação e arquivos de ponto de verificação para backup e restauração no Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 80e04b9f-87c7-4acf-89b1-aa66ffaf7e53
description: Encontre informações sobre logs de transações e arquivos de ponto de verificação e como eles são usados para fazer backup e restauração de dados do Exchange 2013.
ms.openlocfilehash: 5b01fc6924f82e76943795df877ae84b1fde087b
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/03/2020
ms.locfileid: "44456385"
---
# <a name="transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange"></a><span data-ttu-id="9db43-103">Logs de transação e arquivos de ponto de verificação para backup e restauração no Exchange</span><span class="sxs-lookup"><span data-stu-id="9db43-103">Transaction logs and checkpoint files for backup and restore in Exchange</span></span>

<span data-ttu-id="9db43-104">Encontre informações sobre logs de transações e arquivos de ponto de verificação e como eles são usados para fazer backup e restauração de dados do Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="9db43-104">Find information about transaction logs and checkpoint files and how they are used to back up and restore Exchange 2013 data.</span></span>
  
<span data-ttu-id="9db43-105">**Aplica-se a:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="9db43-106">Este artigo descreve como o Exchange Server 2013 usa logs de transação e arquivos de ponto de verificação para ajudar a evitar a perda de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-106">This article describes how Exchange Server 2013 uses transaction logs and checkpoint files to help prevent data loss.</span></span> <span data-ttu-id="9db43-107">É importante estar ciente dessas informações ao desenvolver aplicativos de backup e restauração que usam o serviço de cópias de sombra de volume (VSS) em versões do Windows Server a partir do Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="9db43-107">It is important to be aware of this information when you develop backup and restore applications that use the Volume Shadow Copy Service (VSS) in versions of Windows Server starting with Windows Server 2008.</span></span>
  
## <a name="transaction-logs-in-exchange-2013"></a><span data-ttu-id="9db43-108">Logs de transação no Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-108">Transaction logs in Exchange 2013</span></span>

<span data-ttu-id="9db43-109">O Exchange 2013 mantém um único conjunto de arquivos de log de transações para cada banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-109">Exchange 2013 maintains a single set of transaction log files for each database.</span></span> <span data-ttu-id="9db43-110">Uma transação é definida como qualquer operação que altere o estado ou o conteúdo do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-110">A transaction is defined as any operation that changes the state or contents of the database.</span></span> <span data-ttu-id="9db43-111">Os arquivos de log de transações de um banco de dados individual registram todas as transações realizadas no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-111">The transaction log files for an individual database record all the transactions performed on the database.</span></span> <span data-ttu-id="9db43-112">Os registros das transações são gravados nos logs de transações antes que sejam feitos no próprio banco de dados, para garantir que todas as transações confirmadas possam ser recuperadas no caso de uma falha no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-112">Records of the transactions are written to the transaction logs before they are made in the database itself, to ensure that all committed transactions can be recovered in the event of a database failure.</span></span> <span data-ttu-id="9db43-113">Os logs de transação do banco de dados do Exchange 2013 são armazenados no disco antes de as transações serem confirmadas no arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-113">Exchange 2013 database transaction logs are stored on disk before the transactions are committed to the database file.</span></span> 
  
<span data-ttu-id="9db43-114">A gravação das transações antes da atualização do banco de dados é chamada de registro de write-ahead.</span><span class="sxs-lookup"><span data-stu-id="9db43-114">The recording of the transactions before the database is updated is called write-ahead logging.</span></span> <span data-ttu-id="9db43-115">Para ajudar a garantir que o banco de dados seja colocado corretamente de volta para o estado apropriado, o Exchange 2013 grava dados nos arquivos de banco de dados usando gravações e pontos de verificação baseados em páginas.</span><span class="sxs-lookup"><span data-stu-id="9db43-115">To help ensure that the database is correctly brought back to the proper state, Exchange 2013 writes data into the database files by using page-based writes and checkpoints.</span></span> <span data-ttu-id="9db43-116">Durante as operações regulares, o repositório do Exchange primeiro registra as alterações no banco de dados nos logs de transações e, em seguida, faz essas alterações em uma cópia na memória do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-116">During regular operations, the Exchange store first records database changes in the transaction logs, and then makes those changes on an in-memory copy of the database.</span></span> <span data-ttu-id="9db43-117">Os logs de transação registram o início e o fim de cada transação.</span><span class="sxs-lookup"><span data-stu-id="9db43-117">The transaction logs record the beginning and end of each transaction.</span></span> <span data-ttu-id="9db43-118">Isso garante que as informações suficientes estejam disponíveis para desfazer ou reverter operações posteriormente no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-118">This ensures that sufficient information is available to later undo or roll back operations in the database.</span></span>
  
<span data-ttu-id="9db43-119">Ao se recuperar de erros nos quais o arquivo de banco de dados no disco está danificado, mas os logs de transações estão intactos, o aplicativo de restauração deve primeiro restaurar uma cópia válida conhecida do arquivo de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-119">When recovering from errors in which the database file on disk is damaged, but the transaction logs are intact, your restore application must first restore a known good copy of the database file.</span></span>
  
<span data-ttu-id="9db43-120">O repositório do Exchange repete as transações dos logs de transação incluídos no backup e, em seguida, repete as transações restantes dos arquivos de log de transações em disco.</span><span class="sxs-lookup"><span data-stu-id="9db43-120">The Exchange store replays the transactions from the previously backed up transaction logs, and then replays any remaining transactions from the on-disk transaction log files.</span></span> <span data-ttu-id="9db43-121">Observe que às vezes, as transações podem ser perdidas se o sistema falhar quando as transações são registradas nos logs de transação e quando são realmente gravadas nos arquivos do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="9db43-121">Note that sometimes transactions can be lost if the system fails between when the transactions are recorded in the transaction logs, and when they are actually written to the database files.</span></span> 
  
<span data-ttu-id="9db43-122">Periodicamente, o repositório do Exchange verifica a imagem de banco de dados na memória e, em seguida, determina quais páginas foram alteradas.</span><span class="sxs-lookup"><span data-stu-id="9db43-122">Periodically, the Exchange store checks the in-memory database image, and then determines which pages have changed.</span></span> <span data-ttu-id="9db43-123">O repositório do Exchange combina as alterações pendentes e, em seguida, grava essas páginas no arquivo de banco de dados no disco.</span><span class="sxs-lookup"><span data-stu-id="9db43-123">The Exchange store combines the pending changes, and then writes those pages to the database file on disk.</span></span>
  
## <a name="checkpoint-files-in-exchange-2013"></a><span data-ttu-id="9db43-124">Arquivos de ponto de verificação no Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-124">Checkpoint files in Exchange 2013</span></span>

<span data-ttu-id="9db43-125">Um arquivo de ponto de verificação registra quais transações registradas foram gravadas nos arquivos de banco de dados de disco.</span><span class="sxs-lookup"><span data-stu-id="9db43-125">A checkpoint file records which logged transactions have been written to the on-disk database files.</span></span> <span data-ttu-id="9db43-126">O ponto de verificação é avançado quando todas as páginas do banco de dados que foram modificadas por entradas nos logs de transação são gravadas com êxito no disco.</span><span class="sxs-lookup"><span data-stu-id="9db43-126">The checkpoint is advanced when all the database pages that have been modified by entries in the transaction logs are successfully written to disk.</span></span> <span data-ttu-id="9db43-127">Como o arquivo de ponto de verificação registra quais transações já estão na imagem de banco de dados no disco, o repositório do Exchange só precisa repetir as transações que ocorreram após o ponto de verificação.</span><span class="sxs-lookup"><span data-stu-id="9db43-127">Because the checkpoint file records which transactions are already in the on-disk database image, the Exchange store only needs to replay transactions that occurred after the checkpoint.</span></span> <span data-ttu-id="9db43-128">Dependendo do período de tempo entre backups, isso pode diminuir significativamente o número de transações que devem ser repetidas no banco de dados se ocorrer uma falha do sistema.</span><span class="sxs-lookup"><span data-stu-id="9db43-128">Depending on the time period between backups, this can greatly decrease the number of transactions that must be replayed into the database if a system failure occurs.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="9db43-129">Confira também</span><span class="sxs-lookup"><span data-stu-id="9db43-129">See also</span></span>

- [<span data-ttu-id="9db43-130">Conceitos de backup e restauração para o Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-130">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
- [<span data-ttu-id="9db43-131">Tipos de operações de backup para o Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-131">Types of backup operations for Exchange 2013</span></span>](types-of-backup-operations-for-exchange-2013.md)
- [<span data-ttu-id="9db43-132">Restauração de bancos de dados do Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="9db43-132">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    

