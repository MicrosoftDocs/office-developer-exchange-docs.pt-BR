---
title: Atualizar as informações de configuração usando a Descoberta Automática
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: c2f3c6a5-e8ea-4375-b41a-686a6f238d33
description: Saiba como e quando atualizar as informações de configuração para sua conexão do Exchange usando a descoberta automática.
ms.openlocfilehash: b9a4264d150d09b0e143e0bf7365af351bb2ef44
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/03/2020
ms.locfileid: "44527751"
---
# <a name="refresh-configuration-information-by-using-autodiscover"></a><span data-ttu-id="4c52e-103">Atualizar as informações de configuração usando a Descoberta Automática</span><span class="sxs-lookup"><span data-stu-id="4c52e-103">Refresh configuration information by using Autodiscover</span></span>

<span data-ttu-id="4c52e-104">Saiba como e quando atualizar as informações de configuração para sua conexão do Exchange usando a descoberta automática.</span><span class="sxs-lookup"><span data-stu-id="4c52e-104">Learn how and when to refresh configuration information for your Exchange connection by using Autodiscover.</span></span>
  
<span data-ttu-id="4c52e-105">Quando o aplicativo EWS é executado pela primeira vez, a descoberta automática oferece uma ótima maneira de coletar as informações necessárias para se conectar à caixa de correio do Exchange do usuário.</span><span class="sxs-lookup"><span data-stu-id="4c52e-105">When your EWS application runs for the first time, Autodiscover provides a great way for you to collect the information you need in order to connect to your user's Exchange mailbox.</span></span> <span data-ttu-id="4c52e-106">Mas a descoberta automática não é apenas para uso pela primeira vez.</span><span class="sxs-lookup"><span data-stu-id="4c52e-106">But Autodiscover isn't just for first time use.</span></span> <span data-ttu-id="4c52e-107">O uso da descoberta automática em uma base regular pode ajudar a manter seu aplicativo conectado, permitindo que ele responda às alterações na implantação do Exchange.</span><span class="sxs-lookup"><span data-stu-id="4c52e-107">Using Autodiscover on a regular basis can help keep your application connected by enabling it to respond to changes in the Exchange deployment.</span></span>
  
## <a name="cache-autodiscover-endpoint-and-ews-settings"></a><span data-ttu-id="4c52e-108">Configurações de ponto de extremidade de descoberta automática de cache e EWS</span><span class="sxs-lookup"><span data-stu-id="4c52e-108">Cache Autodiscover endpoint and EWS settings</span></span>
<span data-ttu-id="4c52e-109"><a name="bk_CacheSettings"> </a></span><span class="sxs-lookup"><span data-stu-id="4c52e-109"><a name="bk_CacheSettings"> </a></span></span>

<span data-ttu-id="4c52e-110">Embora seja recomendável que você use a descoberta automática regularmente, o quão regularmente você usa isso requer alguma consideração.</span><span class="sxs-lookup"><span data-stu-id="4c52e-110">While we recommend that you use Autodiscover regularly, how regularly you use it requires some consideration.</span></span> <span data-ttu-id="4c52e-111">O ideal é que você Equilibre a resposta rapidamente às alterações no ambiente em relação à geração de tráfego de rede muito desnecessário.</span><span class="sxs-lookup"><span data-stu-id="4c52e-111">Ideally you can balance responding quickly to changes in the environment against generating too much unnecessary network traffic.</span></span> <span data-ttu-id="4c52e-112">Quando o aplicativo recebe uma resposta de descoberta automática bem-sucedida pela primeira vez, você deve salvar as seguintes informações para não precisar repetir o processo de descoberta automática sempre que enviar uma solicitação do EWS.</span><span class="sxs-lookup"><span data-stu-id="4c52e-112">When your application gets a successful Autodiscover response for the first time, you should save the following information so that you do not have to repeat the Autodiscover process every time you send an EWS request.</span></span>
  
<span data-ttu-id="4c52e-113">**Tabela 1. Informações para armazenar em cache as solicitações de descoberta automática**</span><span class="sxs-lookup"><span data-stu-id="4c52e-113">**Table 1. Information to cache for Autodiscover requests**</span></span>

|<span data-ttu-id="4c52e-114">**Configuração para cache**</span><span class="sxs-lookup"><span data-stu-id="4c52e-114">**Setting to cache**</span></span>|<span data-ttu-id="4c52e-115">**Válido para...**</span><span class="sxs-lookup"><span data-stu-id="4c52e-115">**Valid for…**</span></span>|<span data-ttu-id="4c52e-116">**Detalhes**</span><span class="sxs-lookup"><span data-stu-id="4c52e-116">**Details**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="4c52e-117">Ponto de extremidade de descoberta automática</span><span class="sxs-lookup"><span data-stu-id="4c52e-117">Autodiscover endpoint</span></span>  <br/> |<span data-ttu-id="4c52e-118">Contanto que funcione</span><span class="sxs-lookup"><span data-stu-id="4c52e-118">As long as it works</span></span>  <br/> |<span data-ttu-id="4c52e-119">Quando você salva o ponto de extremidade de descoberta automática que retornou uma resposta bem-sucedida, não é necessário repetir o processo de [geração de uma lista de pontos de extremidade de descoberta automática](how-to-generate-a-list-of-autodiscover-endpoints.md) e experimentá-los até obter uma resposta bem-sucedida.</span><span class="sxs-lookup"><span data-stu-id="4c52e-119">When you save the Autodiscover endpoint that returned a successful response, you do not have to repeat the process of [generating a list of Autodiscover endpoints](how-to-generate-a-list-of-autodiscover-endpoints.md) and trying them until you get a successful response.</span></span><br/><br/> <span data-ttu-id="4c52e-120">**Observação**: a API gerenciada do EWS não dá suporte ao armazenamento em cache do ponto de extremidade de descoberta automática.</span><span class="sxs-lookup"><span data-stu-id="4c52e-120">**NOTE**: The EWS Managed API does not support caching the Autodiscover endpoint.</span></span>           |
|<span data-ttu-id="4c52e-121">URL do EWS e quaisquer outras configurações recuperadas da resposta de descoberta automática</span><span class="sxs-lookup"><span data-stu-id="4c52e-121">EWS URL and any other settings retrieved from the Autodiscover response</span></span>  <br/> |<span data-ttu-id="4c52e-122">Uma semana</span><span class="sxs-lookup"><span data-stu-id="4c52e-122">One week</span></span>  <br/> |<span data-ttu-id="4c52e-123">Ao salvar a URL do EWS e outras configurações relacionadas, não é necessário [Enviar uma nova solicitação de descoberta automática](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) para cada solicitação do EWS ou se o aplicativo for reiniciado.</span><span class="sxs-lookup"><span data-stu-id="4c52e-123">By saving the EWS URL and other related settings, you do not have to [send a new Autodiscover request](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) for each EWS request or if your application restarts.</span></span> <span data-ttu-id="4c52e-124">No entanto, mesmo que uma URL do EWS funcione para o seu usuário, pode haver um servidor disponível que seja mais adequado.</span><span class="sxs-lookup"><span data-stu-id="4c52e-124">However, even if an EWS URL works for your user, a server might be available that is more optimal.</span></span><br/><br/> <span data-ttu-id="4c52e-125">Por exemplo, a caixa de correio do usuário pode ter sido movida para um novo servidor de caixa de correio, resultando em um novo ponto de extremidade do EWS preferencial.</span><span class="sxs-lookup"><span data-stu-id="4c52e-125">For example, the user's mailbox might have moved to a new mailbox server, resulting in a new preferred EWS endpoint.</span></span> <span data-ttu-id="4c52e-126">Recomendamos que você atualize suas configurações de usuário enviando uma nova solicitação de descoberta automática depois que uma semana tiver passado desde a última solicitação de descoberta automática.</span><span class="sxs-lookup"><span data-stu-id="4c52e-126">We recommend that you refresh your user settings by sending a new Autodiscover request after one week has passed since your last Autodiscover request.</span></span> <span data-ttu-id="4c52e-127">Esse tempo pode ser ajustado para atender aos requisitos do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="4c52e-127">This time can be adjusted to meet the requirements of your application.</span></span>  <br/> |
   
## <a name="refresh-cached-configuration-information"></a><span data-ttu-id="4c52e-128">Atualizar informações de configuração armazenadas em cache</span><span class="sxs-lookup"><span data-stu-id="4c52e-128">Refresh cached configuration information</span></span>
<span data-ttu-id="4c52e-129"><a name="bk_RefreshConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="4c52e-129"><a name="bk_RefreshConfig"> </a></span></span>

<span data-ttu-id="4c52e-130">Agora que você tem as informações armazenadas em cache, vamos examinar como você pode manter o cache atualizado.</span><span class="sxs-lookup"><span data-stu-id="4c52e-130">Now that you have the information cached, let's examine how you can keep that cache fresh.</span></span> <span data-ttu-id="4c52e-131">Recomendamos que você atualize suas informações armazenadas em cache quando:</span><span class="sxs-lookup"><span data-stu-id="4c52e-131">We recommend that you refresh your cached information when:</span></span>
  
- <span data-ttu-id="4c52e-132">O período de validade das informações expira.</span><span class="sxs-lookup"><span data-stu-id="4c52e-132">The information's validity period expires.</span></span>
    
- <span data-ttu-id="4c52e-133">Ocorre um [erro relacionado à conexão](#bk_ConnectionErrors) , e suas informações em cache foram atualizadas pela última vez em uma hora atrás.</span><span class="sxs-lookup"><span data-stu-id="4c52e-133">A [Connection-related error](#bk_ConnectionErrors) occurs AND your cached information was last refreshed over an hour ago.</span></span>
    
<span data-ttu-id="4c52e-134">Para atualizar suas informações armazenadas em cache, envie uma solicitação de descoberta automática para um ponto de extremidade de descoberta automática em cache e faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="4c52e-134">To refresh your cached information, send an Autodiscover request to a cached Autodiscover endpoint, and do the following:</span></span>
  
- <span data-ttu-id="4c52e-135">Se a solicitação for bem-sucedida, compare o ponto de extremidade do EWS na resposta com o ponto de extremidade do EWS armazenado em cache e faça o seguinte:</span><span class="sxs-lookup"><span data-stu-id="4c52e-135">If the request succeeds, compare the EWS endpoint in the response with the cached EWS endpoint, and do the following:</span></span>
    
  - <span data-ttu-id="4c52e-136">Se forem diferentes, use o ponto de extremidade novo EWS.</span><span class="sxs-lookup"><span data-stu-id="4c52e-136">If they are different, use the new EWS endpoint.</span></span> <span data-ttu-id="4c52e-137">Se você estiver atualizando para se recuperar de um erro, repita a solicitação com falha com o novo ponto de extremidade.</span><span class="sxs-lookup"><span data-stu-id="4c52e-137">If you're refreshing to recover from an error, retry the failed request with the new endpoint.</span></span>
    
  - <span data-ttu-id="4c52e-138">Se forem iguais, continue a usar o ponto de extremidade do EWS original.</span><span class="sxs-lookup"><span data-stu-id="4c52e-138">If they are the same, continue to use the original EWS endpoint.</span></span> <span data-ttu-id="4c52e-139">Se você estiver atualizando para se recuperar de um erro, manipule o erro conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="4c52e-139">If you're refreshing to recover from an error, handle the error as appropriate.</span></span>
    
- <span data-ttu-id="4c52e-140">Se a solicitação falhar, inicie o [processo de descoberta automática](autodiscover-for-exchange.md) desde o início.</span><span class="sxs-lookup"><span data-stu-id="4c52e-140">If the request fails, start the [Autodiscover process](autodiscover-for-exchange.md) from the beginning.</span></span> <span data-ttu-id="4c52e-141">Após obter uma resposta bem-sucedida, substitua o ponto de extremidade de descoberta automática em cache pelo ponto de extremidade de descoberta automática com êxito e continue a usar o novo ponto de extremidade do EWS.</span><span class="sxs-lookup"><span data-stu-id="4c52e-141">After you get a successful response, replace the cached Autodiscover endpoint with the Autodiscover endpoint that succeeded and continue to use the new EWS endpoint.</span></span> <span data-ttu-id="4c52e-142">Se você não receber uma resposta bem-sucedida, continue a usar o ponto de extremidade de descoberta automática e o ponto de extremidade do EWS originais.</span><span class="sxs-lookup"><span data-stu-id="4c52e-142">If you do not get a successful response, continue to use the original Autodiscover endpoint and EWS endpoint.</span></span> <span data-ttu-id="4c52e-143">Se você estiver atualizando para se recuperar de um erro, manipule o erro conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="4c52e-143">If you're refreshing to recover from an error, handle the error as appropriate.</span></span> 
    
<span data-ttu-id="4c52e-144">A figura a seguir fornece uma representação visual desse processo.</span><span class="sxs-lookup"><span data-stu-id="4c52e-144">The following figure provides a visual representation of this process.</span></span>
  
<span data-ttu-id="4c52e-145">**Figura 1. Processo de atualização de informações de configuração usando a descoberta automática**</span><span class="sxs-lookup"><span data-stu-id="4c52e-145">**Figure 1. Process for refreshing configuration information by using Autodiscover**</span></span>

![Diagrama esquemático mostrando como a Descoberta Automática atualiza informações de configuração.](media/Ex15_Autodiscover_Refresh_Flowchart.png)
  
### <a name="connection-related-errors"></a><span data-ttu-id="4c52e-147">Erros relacionados à conexão</span><span class="sxs-lookup"><span data-stu-id="4c52e-147">Connection-related errors</span></span>
<span data-ttu-id="4c52e-148"><a name="bk_ConnectionErrors"> </a></span><span class="sxs-lookup"><span data-stu-id="4c52e-148"><a name="bk_ConnectionErrors"> </a></span></span>

<span data-ttu-id="4c52e-149">A atualização de suas informações de configuração em cache pode ajudar com alguns erros, mas não todos.</span><span class="sxs-lookup"><span data-stu-id="4c52e-149">Refreshing your cached configuration information can help with some errors, but not all.</span></span> 
  
<span data-ttu-id="4c52e-150">**Tabela 2. Erros resolvidos pela atualização do cache**</span><span class="sxs-lookup"><span data-stu-id="4c52e-150">**Table 2. Errors addressed by refreshing your cache**</span></span>

|<span data-ttu-id="4c52e-151">**Error**</span><span class="sxs-lookup"><span data-stu-id="4c52e-151">**Error**</span></span>|<span data-ttu-id="4c52e-152">**Implementação da API gerenciada do EWS**</span><span class="sxs-lookup"><span data-stu-id="4c52e-152">**EWS Managed API implementation**</span></span>|<span data-ttu-id="4c52e-153">**Anotações**</span><span class="sxs-lookup"><span data-stu-id="4c52e-153">**Notes**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="4c52e-154">Erros de DNS ou de falha de rede</span><span class="sxs-lookup"><span data-stu-id="4c52e-154">DNS or network failure errors</span></span><br/><br/> <span data-ttu-id="4c52e-155">Exemplo: não foi possível encontrar o nome do host.</span><span class="sxs-lookup"><span data-stu-id="4c52e-155">Example: Host name could not be found.</span></span>  <br/> |[<span data-ttu-id="4c52e-156">Onremoteexception</span><span class="sxs-lookup"><span data-stu-id="4c52e-156">ServiceRemoteException</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.exchange.webservices.data.serviceremoteexception?view=exchange-ews-api) <br/> |<span data-ttu-id="4c52e-157">Qualquer erro que indique que o servidor não pôde ser encontrado ou não pôde ser alcançado pode ser resolvido tentando a descoberta automática.</span><span class="sxs-lookup"><span data-stu-id="4c52e-157">Any error that indicates that the server could not be found or could not be reached might be resolved by trying Autodiscover.</span></span> <br/><br/> <span data-ttu-id="4c52e-158">O ponto de extremidade do EWS em cache pode não ser mais válido e a descoberta automática pode ser capaz de apontar para o novo servidor.</span><span class="sxs-lookup"><span data-stu-id="4c52e-158">Your cached EWS endpoint might no longer be valid, and Autodiscover might be able to point you to the new server.</span></span>  <br/> |
|<span data-ttu-id="4c52e-159">Erros de status HTTP</span><span class="sxs-lookup"><span data-stu-id="4c52e-159">HTTP status errors</span></span><br/><br/> <span data-ttu-id="4c52e-160">Exemplo: serviço 503 indisponível</span><span class="sxs-lookup"><span data-stu-id="4c52e-160">Example: 503 Service Unavailable</span></span>  <br/> |[<span data-ttu-id="4c52e-161">Onremoteexception</span><span class="sxs-lookup"><span data-stu-id="4c52e-161">ServiceRemoteException</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.exchange.webservices.data.serviceremoteexception?view=exchange-ews-api) <br/> |<span data-ttu-id="4c52e-162">Os erros de status HTTP podem ocorrer por vários motivos diferentes.</span><span class="sxs-lookup"><span data-stu-id="4c52e-162">HTTP status errors can happen for many different reasons.</span></span><br/><br/> <span data-ttu-id="4c52e-163">No entanto, é uma boa ideia tentar a descoberta automática para ver se um novo ponto de extremidade do EWS está disponível para o usuário.</span><span class="sxs-lookup"><span data-stu-id="4c52e-163">However, it's a good idea to try Autodiscover to see if a new EWS endpoint is available for the user.</span></span>  <br/> |
|<span data-ttu-id="4c52e-164">Códigos de erro do EWS</span><span class="sxs-lookup"><span data-stu-id="4c52e-164">EWS error codes</span></span> <br/><br/> <span data-ttu-id="4c52e-165">Exemplo: ErrorConnectionFailed</span><span class="sxs-lookup"><span data-stu-id="4c52e-165">Example: ErrorConnectionFailed</span></span> <br/> |[<span data-ttu-id="4c52e-166">ResponseCodeType</span><span class="sxs-lookup"><span data-stu-id="4c52e-166">ResponseCodeType</span></span>](../web-service-reference/responsecode.md) <br/> | <span data-ttu-id="4c52e-167">A maioria dos códigos de erro do EWS não garante a atualização de suas informações de configuração.</span><span class="sxs-lookup"><span data-stu-id="4c52e-167">Most EWS error codes don't warrant refreshing your configuration information.</span></span><br/><br/> <span data-ttu-id="4c52e-168">No entanto, o seguinte indica especificamente que as informações de configuração precisam ser atualizadas:</span><span class="sxs-lookup"><span data-stu-id="4c52e-168">However, the following specifically indicate that the configuration information needs to be updated:</span></span><br/><span data-ttu-id="4c52e-169">- **ErrorConnectionFailed**</span><span class="sxs-lookup"><span data-stu-id="4c52e-169">- **ErrorConnectionFailed**</span></span> <br/><span data-ttu-id="4c52e-170">- **ErrorMailboxMoveInProgress**</span><span class="sxs-lookup"><span data-stu-id="4c52e-170">- **ErrorMailboxMoveInProgress**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="4c52e-171">Confira também</span><span class="sxs-lookup"><span data-stu-id="4c52e-171">See also</span></span>

- [<span data-ttu-id="4c52e-172">Descoberta Automática do Exchange</span><span class="sxs-lookup"><span data-stu-id="4c52e-172">Autodiscover for Exchange</span></span>](autodiscover-for-exchange.md)  
- [<span data-ttu-id="4c52e-173">Gerar uma lista de pontos de extremidade de Descoberta Automática</span><span class="sxs-lookup"><span data-stu-id="4c52e-173">Generate a list of Autodiscover endpoints</span></span>](how-to-generate-a-list-of-autodiscover-endpoints.md)   
- [<span data-ttu-id="4c52e-174">Obter as configurações de usuário do Exchange usando a Descoberta Automática</span><span class="sxs-lookup"><span data-stu-id="4c52e-174">Get user settings from Exchange by using Autodiscover</span></span>](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)
    

